
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="This guy is so lazy!">
      
      
      
        <meta name="author" content="overweight">
      
      
        <link rel="canonical" href="http://hexiaowen.cn/opensource/openEuler/my_traval_of_openeuler/">
      
      <link rel="icon" href="../../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-7.3.6">
    
    
      
        <title>openEuler之旅 - overweight</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.f98371ca.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.3f5d1f46.min.css">
        
          
          
          <meta name="theme-color" content="#ffffff">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      

  


  

  



    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="white" data-md-color-accent="red">
  
    
    <script>function __prefix(e){return new URL("../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#openeuler" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="overweight" class="md-header__button md-logo" aria-label="overweight" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 89 89">
  <path d="M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z" />
  <path d="M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z" style="fill-opacity: 0.5" />
  <path d="M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z" />
  <path d="M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z" style="fill-opacity: 0.25" />
</svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            overweight
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              openEuler之旅
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/hexiaowen/hexiaowen.github.io" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    hexiaowen
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        首页
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../opensource/" class="md-tabs__link md-tabs__link--active">
        开源
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../software/systemd/" class="md-tabs__link">
        软件
      </a>
    </li>
  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../../notes/learning-rust/rust-modules/" class="md-tabs__link">
        笔记
      </a>
    </li>
  

  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="overweight" class="md-nav__button md-logo" aria-label="overweight" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 89 89">
  <path d="M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z" />
  <path d="M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z" style="fill-opacity: 0.5" />
  <path d="M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z" />
  <path d="M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z" style="fill-opacity: 0.25" />
</svg>

    </a>
    overweight
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/hexiaowen/hexiaowen.github.io" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    hexiaowen
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../..">首页</a>
          
        </div>
      
      <nav class="md-nav" aria-label="首页" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          首页
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2">
          开源
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="开源" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          开源
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../opensource/" class="md-nav__link">
        开源指北
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../awsomelist/" class="md-nav__link">
        Awesome List
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          openEuler之旅
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        openEuler之旅
      </a>
      
        


<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#openeuler_1" class="md-nav__link">
    openEuler是什么?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#openeuler_2" class="md-nav__link">
    openEuler版本怎么规划?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#openeuler_3" class="md-nav__link">
    openEuler 版本如何构建？
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#openeuler_4" class="md-nav__link">
    openEuler 版本里有啥软件？
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#openeuler-sigs" class="md-nav__link">
    了解openEuler SIGs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#openeuler_5" class="md-nav__link">
    openEuler社区开发全景？
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#openeuler_6" class="md-nav__link">
    如果参与openEuler社区贡献？
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#openeuler_7" class="md-nav__link">
    开发者可以在openEuler社区做些什么？
  </a>
  
    <nav class="md-nav" aria-label="开发者可以在openEuler社区做些什么？">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1issue" class="md-nav__link">
    1、创建issue，提交需求&amp;问题&amp;建议
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2prbugcve" class="md-nav__link">
    2、提交PR，修复一个问题（bug、cve、新特性）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    3、创建兴趣小组
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    4、贡献软件包
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#openeuler-obs" class="md-nav__link">
    openEuler OBS使用
  </a>
  
    <nav class="md-nav" aria-label="openEuler OBS使用">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#obs" class="md-nav__link">
    什么是obs？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#obs_1" class="md-nav__link">
    如何配置obs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osc" class="md-nav__link">
    OSC 命令
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#package" class="md-nav__link">
    如何创建自己的工程，package
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_service" class="md-nav__link">
    _service 的使用，与码云的联动
  </a>
  
    <nav class="md-nav" aria-label="_service 的使用，与码云的联动">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#git" class="md-nav__link">
    利用源服务直接获取git源码并编译成包
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#webhook-gitpush" class="md-nav__link">
    利用 webhook 使源服务在git仓库push时触发
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3">
          软件
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="软件" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          软件
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../software/systemd/" class="md-nav__link">
        systemd
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4">
          笔记
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="笔记" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          笔记
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_1" type="checkbox" id="__nav_4_1" >
      
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4_1">
          learning-rust
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="learning-rust" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_1">
          <span class="md-nav__icon md-icon"></span>
          learning-rust
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../notes/learning-rust/rust-modules/" class="md-nav__link">
        模块划分
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../notes/learning-rust/rust-ownership/" class="md-nav__link">
        所有权
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../notes/learning-rust/rust-lifetime/" class="md-nav__link">
        生命周期
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../notes/learning-rust/rust-errorhandling/" class="md-nav__link">
        错误处理
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#openeuler_1" class="md-nav__link">
    openEuler是什么?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#openeuler_2" class="md-nav__link">
    openEuler版本怎么规划?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#openeuler_3" class="md-nav__link">
    openEuler 版本如何构建？
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#openeuler_4" class="md-nav__link">
    openEuler 版本里有啥软件？
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#openeuler-sigs" class="md-nav__link">
    了解openEuler SIGs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#openeuler_5" class="md-nav__link">
    openEuler社区开发全景？
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#openeuler_6" class="md-nav__link">
    如果参与openEuler社区贡献？
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#openeuler_7" class="md-nav__link">
    开发者可以在openEuler社区做些什么？
  </a>
  
    <nav class="md-nav" aria-label="开发者可以在openEuler社区做些什么？">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1issue" class="md-nav__link">
    1、创建issue，提交需求&amp;问题&amp;建议
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2prbugcve" class="md-nav__link">
    2、提交PR，修复一个问题（bug、cve、新特性）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    3、创建兴趣小组
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    4、贡献软件包
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#openeuler-obs" class="md-nav__link">
    openEuler OBS使用
  </a>
  
    <nav class="md-nav" aria-label="openEuler OBS使用">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#obs" class="md-nav__link">
    什么是obs？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#obs_1" class="md-nav__link">
    如何配置obs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osc" class="md-nav__link">
    OSC 命令
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#package" class="md-nav__link">
    如何创建自己的工程，package
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_service" class="md-nav__link">
    _service 的使用，与码云的联动
  </a>
  
    <nav class="md-nav" aria-label="_service 的使用，与码云的联动">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#git" class="md-nav__link">
    利用源服务直接获取git源码并编译成包
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#webhook-gitpush" class="md-nav__link">
    利用 webhook 使源服务在git仓库push时触发
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/hexiaowen/hexiaowen.github.io/edit/master/docs/opensource/openEuler/my_traval_of_openeuler.md" title="编辑此页" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="openeuler">openEuler社区参与之旅<a class="headerlink" href="#openeuler" title="Permanent link">#</a></h1>
<h2 id="openeuler_1">openEuler是什么?<a class="headerlink" href="#openeuler_1" title="Permanent link">#</a></h2>
<p>openEuler是一个开源、免费的Linux发行版平台，将通过开放的社区形式与全球的开发者共同构建一个开放、多元和架构包容的软件生态体系。同时，openEuler也是一个创新的平台，鼓励任何人在该平台上提出新想法、开拓新思路、实践新方案。</p>
<p><strong>安装界面：</strong></p>
<p><img alt="img" src="https://openeuler.org/zh/docs/20.03_LTS/docs/Quickstart/figures/%E9%80%89%E6%8B%A9%E8%AF%AD%E8%A8%80.png" /></p>
<p><strong>openEuler的官方网站： <a href="https://openeuler.org/">https://openeuler.org/</a></strong></p>
<p><strong>repo 下载地址： <a href="https://repo.openeuler.org">https://repo.openeuler.org</a></strong></p>
<p><strong>文档手册：<a href="https://openeuler.org/zh/docs/20.03_LTS/docs/Releasenotes/release_notes.html">https://openeuler.org/zh/docs/20.03_LTS/docs/Releasenotes/release_notes.html</a></strong></p>
<p><img alt="image-20200521203551777" src="../openEuler%E7%A4%BE%E5%8C%BA%E5%8F%82%E4%B8%8E%E4%B9%8B%E6%97%85.assets/image-20200521203551777.png" /></p>
<h2 id="openeuler_2">openEuler版本怎么规划?<a class="headerlink" href="#openeuler_2" title="Permanent link">#</a></h2>
<p><img alt="image-20200521204342097" src="../openEuler%E7%A4%BE%E5%8C%BA%E5%8F%82%E4%B8%8E%E4%B9%8B%E6%97%85.assets/image-20200521204342097.png" /></p>
<p><img alt="img" src="../openEuler%E7%A4%BE%E5%8C%BA%E5%8F%82%E4%B8%8E%E4%B9%8B%E6%97%85.assets/2020-03-25-lifecycle-02.png" /></p>
<p>说明：</p>
<ol>
<li>
<p>有开发版本和LTS（Long term support）两条线的版本。</p>
</li>
<li>
<p>遵循Upstream First原则，直接来源于原生社区，并反哺原生社区。</p>
</li>
<li>
<p>master分支即为当前最新版本开发分支，一旦发布开发版本或LTS版本，</p>
</li>
</ol>
<p>即基于当前master主干拉出对应版本分支进入维护阶段。</p>
<table>
<thead>
<tr>
<th></th>
<th>openEuler 开发版本（非LTS）</th>
<th><strong>openEuler</strong> LTS版本</th>
</tr>
</thead>
<tbody>
<tr>
<td>版本定位</td>
<td>构筑开发者生态，新特性活跃，版本演进快</td>
<td>支持合作伙伴构筑商业发行版</td>
</tr>
<tr>
<td>发布周期</td>
<td>0.5年</td>
<td>2年</td>
</tr>
<tr>
<td>维护周期</td>
<td>0.5年</td>
<td>4年 or more</td>
</tr>
<tr>
<td>质量标准</td>
<td>低，对标fedora质量要求</td>
<td>中，对标centos质量要求</td>
</tr>
<tr>
<td>关键工作</td>
<td>新特性、bugfix、CVE、升级选型等</td>
<td>bugfix、CVE 、有限特性</td>
</tr>
<tr>
<td>对应分支</td>
<td>当前无，下一个版本openEuler-20.09</td>
<td>最新分支openEuler-20.03LTS</td>
</tr>
</tbody>
</table>
<h2 id="openeuler_3">openEuler 版本如何构建？<a class="headerlink" href="#openeuler_3" title="Permanent link">#</a></h2>
<p><strong>openEuler构建模型：</strong></p>
<p><img alt="image-20200521210943225" src="../openEuler%E7%A4%BE%E5%8C%BA%E5%8F%82%E4%B8%8E%E4%B9%8B%E6%97%85.assets/image-20200521210943225.png" /></p>
<p><strong>版本如何构建：</strong></p>
<p><img alt="image-20200521211038388" src="../openEuler%E7%A4%BE%E5%8C%BA%E5%8F%82%E4%B8%8E%E4%B9%8B%E6%97%85.assets/image-20200521211038388.png" /></p>
<p><strong>说明：</strong></p>
<table>
<thead>
<tr>
<th>名字</th>
<th>说明</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>码云 openuler  Group</td>
<td>这个组织下存放的都是由openEuler社区发起的原生项目，<br />相当于一个一个的上游社区。例如isula、atune项目。</td>
<td><a href="https://gitee.com/openeuler">https://gitee.com/openeuler</a></td>
</tr>
<tr>
<td>码云 src-openeuler Group</td>
<td>这里存放的是以rpm 源码形式的代码。每个仓库源码都可以直接构建rpm二进制。</td>
<td><a href="https://gitee.com/src-openeuler">https://gitee.com/src-openeuler</a></td>
</tr>
<tr>
<td>OBS</td>
<td>open build service，opensuse发布的一套开源构建系统，类似于koji、yacto等。</td>
<td><a href="https://build.openeuler.org">https://build.openeuler.org</a><br /><a href="https://openbuildservice.org">https://openbuildservice.org</a></td>
</tr>
<tr>
<td>jenkins</td>
<td>CI/CD，持续集成平台，主要用于门禁任务、版本构建任务调度等</td>
<td><a href="http://114.116.250.98/">http://114.116.250.98/</a></td>
</tr>
<tr>
<td>repo</td>
<td>用于归档发布的交付件及yum 软件源。</td>
<td><a href="https://repo.openeuler.org/">https://repo.openeuler.org/</a></td>
</tr>
</tbody>
</table>
<p><strong>代码组织方式：</strong></p>
<ol>
<li>**openeuler group**下的项目，是openEuler发起的项目，代码组织方式按照社区方式管理，可以提交代码与发布release版本。</li>
<li>**src-openeuler group**下的项目，是以rpm规范的格式组织的，源码二进制tar包 + patch + spec，用git管理，可以直接用于rpmbuild 构建。</li>
<li>软件仓库的创建以及obs工程的管理，都是通过配置化管理，后面会涉及相关的指导。</li>
</ol>
<h2 id="openeuler_4">openEuler 版本里有啥软件？<a class="headerlink" href="#openeuler_4" title="Permanent link">#</a></h2>
<p>最直观的方式是访问openEuler官方repo，看看发布件。</p>
<table>
<thead>
<tr>
<th>发布件</th>
<th><strong>构建工具</strong></th>
<th><strong>Repo****归档地址</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>ISO： <br /> Dvd  ISO 、<br />Debuginfo  ISO<br />  Everything  ISO  <br />Source  ISO</td>
<td>mkdvdiso（待开源）、     kiwi</td>
<td><a href="http://repo.openeuler.org/openEuler-20.03-LTS/ISO">http://repo.openeuler.org/openEuler-20.03-LTS/ISO</a></td>
</tr>
<tr>
<td>Qcow2镜像</td>
<td>CreateImage（待开源）</td>
<td><a href="http://repo.openeuler.org/openEuler-20.03-LTS/docker_img">http://repo.openeuler.org/openEuler-20.03-LTS/docker_img</a></td>
</tr>
<tr>
<td>容器镜像</td>
<td>kiwi</td>
<td><a href="http://repo.openeuler.org/openEuler-20.03-LTS/virtual_machine_img">http://repo.openeuler.org/openEuler-20.03-LTS/virtual_machine_img</a></td>
</tr>
<tr>
<td>LiveCD  ？</td>
<td></td>
<td></td>
</tr>
<tr>
<td>…</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>另外一种方式，就是访问openEuler OBS上的构建工程，可以知道每个版本里包含哪些软件，当前的构建状态是啥样的。</p>
<table>
<thead>
<tr>
<th>版本</th>
<th>OBS工程</th>
<th>说明</th>
<th>约束</th>
<th>地址</th>
</tr>
</thead>
<tbody>
<tr>
<td>master主干</td>
<td>openEuler:Factory（新包引入）</td>
<td>新软件加入，首先引入到openEuler软件工场，master分支代码</td>
<td>构建rpm，不会集成到iso或repo中</td>
<td><a href="https://build.openeuler.org/project/show/openEuler:Factory">https://build.openeuler.org/project/show/openEuler:Factory</a></td>
</tr>
<tr>
<td></td>
<td>openEuler:Mainline</td>
<td>主线工程，master分支代码</td>
<td>里面涉及的包都会随着openEuler的版本发布</td>
<td><a href="https://build.openeuler.org/project/show/openEuler:Mainline">https://build.openeuler.org/project/show/openEuler:Mainline</a></td>
</tr>
<tr>
<td>LTS版本</td>
<td>openEuler:20.03:LTS</td>
<td>LTS版本构建工程，openeuler-20.03-LTS分支代码</td>
<td></td>
<td><a href="https://build.openeuler.org/project/show/openEuler:20.03:LTS">https://build.openeuler.org/project/show/openEuler:20.03:LTS</a></td>
</tr>
<tr>
<td>20.09版本（未拉分支）</td>
<td>---</td>
<td></td>
<td></td>
<td>---</td>
</tr>
</tbody>
</table>
<p><strong>软件是如何管理的？</strong></p>
<p>当前openEuler 软件的管理是**以sig组来承载**，所有的软件**唯一的归属于某个sig**。通过<a href="https://gitee.com/openeuler/community/blob/3f8f9a73de9435857ce524e1ce387d2499a51f32/sig/sigs.yaml">sigs.yaml文件</a>，你可以查询到该软件属于哪个sig，并通过<a href="https://gitee.com/openeuler/community/tree/3f8f9a73de9435857ce524e1ce387d2499a51f32/sig">sigs专有归档目</a>你可以查询对应的maintainer。<strong>只有对应的maintainer才有对应仓库代码合入权限。</strong></p>
<p><img src="openEuler社区参与之旅.assets/image-20200521225454468.png" alt="image-20200521225454468" style="zoom:50%;" /></p>
<h2 id="openeuler-sigs">了解openEuler SIGs<a class="headerlink" href="#openeuler-sigs" title="Permanent link">#</a></h2>
<p>SIG就是Special Interest Group的缩写，openEuler社区按照不同的SIG来组织，以便于更好的管理和改善工作流程。</p>
<ul>
<li>SIG组和SIG的邮件列表是开放的，欢迎任何人和团体加入并参与贡献。</li>
<li>SIG都是针对特定的一个或多个技术主题而成立的。SIG内的成员推动交付成果输出，并争取让交付成果成为openEuler社区发行的一部分。</li>
<li>SIG的核心成员主导SIG的治理。请查看<a href="https://gitee.com/openeuler/community/blob/master/community-membership_cn.md">SIG的角色说明</a>。您可以在贡献的同时积累经验和提升影响力。</li>
<li>每一个SIG在Gitee上都会拥有一个或多个项目，这些项目会拥有一个或多个Repository。SIG的交付成果会保存在这些Repository内。</li>
<li>可以在SIG对应的Repository内提交Issue、针对特定问题参与讨论，提交和解决问题，参与评审等。</li>
<li>您也可以通过邮件列表、IRC或视频会议和SIG内的成员进行交流。</li>
</ul>
<p><strong>openEuler SIG 维护策略</strong></p>
<ol>
<li>根据所有软件所涉及领域和方向，openEuler已经垂直的划分了很多基础的SIG。</li>
<li>每个独立软件要归属到唯一SIG里，SIG的maintainer管理该SIG涉及的软件包，并定期审视。</li>
<li>SIG之间要避免正交、耦合，粒度要合理，管理的软件仓规模避免太大。</li>
<li>新成立SIG时，应提前了解当前openEuler是否已经存在相同或类似的SIG。</li>
<li>新SIG申请时，应考虑和其他SIG沟通，将该SIG领域涉及软件一并接管过来。</li>
<li>SIG的成立、运营、废弃受TC委员会监管。</li>
</ol>
<h2 id="openeuler_5">openEuler社区开发全景？<a class="headerlink" href="#openeuler_5" title="Permanent link">#</a></h2>
<p><img src="openEuler社区参与之旅.assets/image-20200506152118205.png" alt="image-20200506152118205"  /></p>
<p>上图是openEuler社区开发指引图。</p>
<p>说明：</p>
<ol>
<li>软件包管理按照软件包所处的时间点分为：<img alt="image-20200506152426591" src="../openEuler%E7%A4%BE%E5%8C%BA%E5%8F%82%E4%B8%8E%E4%B9%8B%E6%97%85.assets/image-20200506152426591.png" />、<img alt="image-20200506152440903" src="../openEuler%E7%A4%BE%E5%8C%BA%E5%8F%82%E4%B8%8E%E4%B9%8B%E6%97%85.assets/image-20200506152440903.png" />、<img alt="image-20200506152503864" src="../openEuler%E7%A4%BE%E5%8C%BA%E5%8F%82%E4%B8%8E%E4%B9%8B%E6%97%85.assets/image-20200506152503864.png" />。</li>
<li>每个阶段的输入是圆框绿底，如<img alt="image-20200506152347249" src="../openEuler%E7%A4%BE%E5%8C%BA%E5%8F%82%E4%B8%8E%E4%B9%8B%E6%97%85.assets/image-20200506152347249.png" />。</li>
<li>所有的开发和维护动作是由issue触发。issue可分为需求、问题、CVE等类型。<img src="openEuler社区参与之旅.assets/image-20200506152831297.png" alt="image-20200506152831297" style="zoom:50%;" />。</li>
<li>所有修改和操作通过PR来发起。</li>
<li>全景图中，每个动作都可能涉及规范或指导。将在后面以表格的方式整理呈现。</li>
</ol>
<p><strong>全景图中涉及的规范：</strong></p>
<table>
<thead>
<tr>
<th>阶段</th>
<th>动作</th>
<th>规范或指导</th>
</tr>
</thead>
<tbody>
<tr>
<td>引入</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td><img alt="image-20200506154105394" src="../openEuler%E7%A4%BE%E5%8C%BA%E5%8F%82%E4%B8%8E%E4%B9%8B%E6%97%85.assets/image-20200506154105394.png" /></td>
<td>指导：《如何申请SIG》 --待输出--</td>
</tr>
<tr>
<td></td>
<td><img alt="image-20200506153902264" src="../openEuler%E7%A4%BE%E5%8C%BA%E5%8F%82%E4%B8%8E%E4%B9%8B%E6%97%85.assets/image-20200506153902264.png" /></td>
<td>规范：<a href="https://gitee.com/openeuler/community/blob/master/zh/technical-committee/governance/software-management.md">《软件包引入和退出要求》</a><br />指导：《openEuler加包指导》 --待输出--</td>
</tr>
<tr>
<td></td>
<td><img alt="image-20200506154028448" src="../openEuler%E7%A4%BE%E5%8C%BA%E5%8F%82%E4%B8%8E%E4%B9%8B%E6%97%85.assets/image-20200506154028448.png" /></td>
<td>规范：<a href="https://gitee.com/openeuler/community/blob/master/zh/contributors/packaging.md">《软件包打包规范》</a></td>
</tr>
<tr>
<td>开发&amp;维护</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td><img alt="image-20200506154538225" src="../openEuler%E7%A4%BE%E5%8C%BA%E5%8F%82%E4%B8%8E%E4%B9%8B%E6%97%85.assets/image-20200506154538225.png" /></td>
<td>规范：《软件包升级选型规范》 --待输出--</td>
</tr>
<tr>
<td></td>
<td><img alt="image-20200506154610817" src="../openEuler%E7%A4%BE%E5%8C%BA%E5%8F%82%E4%B8%8E%E4%B9%8B%E6%97%85.assets/image-20200506154610817.png" /></td>
<td>指导：<a href="https://gitee.com/openeuler/community/blob/master/zh/contributors/packaging.md">《软件包打包规范》</a></td>
</tr>
<tr>
<td></td>
<td><img alt="image-20200506154459319" src="../openEuler%E7%A4%BE%E5%8C%BA%E5%8F%82%E4%B8%8E%E4%B9%8B%E6%97%85.assets/image-20200506154459319.png" /></td>
<td>规范：<a href="https://gitee.com/openeuler/community/blob/master/zh/contributors/packaging.md">《软件包打包规范》</a><br />指导：《如何提交PR、发起检视及合入验证》  --待输出--</td>
</tr>
<tr>
<td></td>
<td><img alt="image-20200506154518672" src="../openEuler%E7%A4%BE%E5%8C%BA%E5%8F%82%E4%B8%8E%E4%B9%8B%E6%97%85.assets/image-20200506154518672.png" /></td>
<td>规范：<a href="https://gitee.com/openeuler/security-committee/blob/master/security-process.md">《openEuler漏洞处理流程》</a><br />规范：<a href="https://gitee.com/openeuler/security-committee/blob/master/security-evaluation.md">《openEuler漏洞严重性评估》</a><br />指导：<a href="https://openeuler.org/zh/security.html">《如何申请CVE、漏洞上报》</a></td>
</tr>
<tr>
<td></td>
<td><img alt="image-20200506154813993" src="../openEuler%E7%A4%BE%E5%8C%BA%E5%8F%82%E4%B8%8E%E4%B9%8B%E6%97%85.assets/image-20200506154813993.png" /></td>
<td>规范：《openEuler软件包随版本发布规范》 --待输出--<br />指导：《如何将软件包加入openEuler发布版本》--待输出--</td>
</tr>
<tr>
<td></td>
<td><img alt="image-20200506154918752" src="../openEuler%E7%A4%BE%E5%8C%BA%E5%8F%82%E4%B8%8E%E4%B9%8B%E6%97%85.assets/image-20200506154918752.png" /></td>
<td>规范：<a href="https://gitee.com/openeuler/security-committee/blob/master/security-process.md">《安全漏洞处理和发布流程》</a></td>
</tr>
<tr>
<td>退出</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td><img alt="image-20200506154436536" src="../openEuler%E7%A4%BE%E5%8C%BA%E5%8F%82%E4%B8%8E%E4%B9%8B%E6%97%85.assets/image-20200506154436536.png" /></td>
<td>规范：<a href="https://gitee.com/openeuler/community/blob/master/zh/technical-committee/governance/software-management.md">《软件包引入和退出要求》</a></td>
</tr>
</tbody>
</table>
<h2 id="openeuler_6">如果参与openEuler社区贡献？<a class="headerlink" href="#openeuler_6" title="Permanent link">#</a></h2>
<p>第一步，开源并不意味者随心所欲，<strong>签署CLA</strong>：<a href="https://openeuler.org/zh/cla.html">“贡献者许可协议”</a>是第一步，阅读并遵守openEuler社区的<a href="https://gitee.com/openeuler/community/blob/master/code-of-conduct.md">行为守则</a>；</p>
<p>第二步，从了解、安装、使用、测试openEuler开始，<strong>积极反馈问题和建议</strong>，相关的<a href="https://openeuler.org/zh/docs/20.03_LTS/docs/Releasenotes/release_notes.html">文档和手册</a>，以及相关的<a href="https://openeuler.org/zh/blog.html">资讯</a>可以帮助你更加深入的了解openEuler。</p>
<p>第三步，开发者熟悉社区的开发流程后——<a href="https://openeuler.org/zh/developer.html">《贡献者指南》</a>，可以基于自己感兴趣的项目和软件，在码云上openEuler对应的项目提交自己的贡献。</p>
<h2 id="openeuler_7">开发者可以在openEuler社区做些什么？<a class="headerlink" href="#openeuler_7" title="Permanent link">#</a></h2>
<p><strong>包括但不限于：</strong></p>
<ul>
<li><strong>提交一些需求，并尽可能实现它</strong></li>
<li><strong>提交一个bug并修复它</strong></li>
<li><strong>上报漏洞及漏洞处理</strong></li>
<li><strong>提出一些建议</strong>，包括不限于网站改进、文档改进、流程规范改进、体验提升等。</li>
<li><strong>为社区添加新的软件</strong></li>
<li><strong>发起社区新项目</strong></li>
</ul>
<p><strong>结合前面的开发者全景图，可以分解成以下动作：</strong></p>
<h3 id="1issue">1、创建issue，提交需求&amp;问题&amp;建议<a class="headerlink" href="#1issue" title="Permanent link">#</a></h3>
<ul>
<li><strong>提出问题</strong>：如果您发现并想向社区上报问题或缺陷，问题提交的方式就是创建一个Issue。您只要将问题以Issue的方式提交到该项目Repository的Issue列表内，并查看<a href="https://gitee.com/openeuler/community/blob/master/zh/contributors/issue-submit.md">Issue提交指南</a>以获取更多的信息。提交问题时，**请尽量遵守**问题提交准则。</li>
<li><strong>提出建议</strong>：如果您想对SIG领域内贡献出自己的意见或建议，也可以通过提交Issue的方式分享给大家。大家可以在该Issue上充分的交流和讨论。为了吸引更广泛的注意，您也可以把Issue的链接附在邮件内，通过邮件列表发送给所有人。</li>
<li><strong>提出需求</strong>：如果你希望某个特性或是技术在openEuler上落地，可以提交需求类issue，<strong>清晰完整的描述有助于团队成员理解，并被更快的接受和排入开发计划。</strong></li>
</ul>
<h3 id="2prbugcve">2、提交PR，修复一个问题（bug、cve、新特性）<a class="headerlink" href="#2prbugcve" title="Permanent link">#</a></h3>
<p>当你提交一个PR的时候，就意味您已经开始给社区贡献代码了。请参考<a href="https://gitee.com/openeuler/community/blob/master/zh/contributors/pull-request.md">openEuler社区PR提交指导</a> 与 <a href="http://git.mydoc.io/?t=153749">码云PR提交流程</a>。</p>
<p><strong>注意事项</strong>：</p>
<ul>
<li>
<p>openEuler只接受PR的形式来提交代码，不允许直接向openEuler下的仓库直接push代码。</p>
</li>
<li>
<p>首先，要找到修复问题对应的仓库，以<a href="https://gitee.com/src-openeuler/mock">src-openEuler/mock</a>为例，点击fork按钮，复制仓库代码到个人名下。</p>
</li>
</ul>
<p><img alt="image-20200521232246188" src="../openEuler%E7%A4%BE%E5%8C%BA%E5%8F%82%E4%B8%8E%E4%B9%8B%E6%97%85.assets/image-20200521232246188.png" /></p>
<ul>
<li>
<p>将代码git clone到本地，如果你的修改不涉及二进制源码软件包的变化，将所修改的代码做成一个patch，因为仓库是以rpm源码包的格式组织的。</p>
</li>
<li>
<p>没个PR都会触发openEuler门禁的检查，包括不定命名、代码规范、代码构建。门禁的结果会稍后回显在评论中，存在失败的检查项要及时修正。</p>
</li>
<li>
<p>通过门禁中的openeuler-rpm-build的链接，你可以逐层找到这次提交构建的临时rpm二进制。后续会将生成的二进制直接回显到评论里。</p>
</li>
</ul>
<p><img alt="image-20200522002832030" src="../openEuler%E7%A4%BE%E5%8C%BA%E5%8F%82%E4%B8%8E%E4%B9%8B%E6%97%85.assets/image-20200522002832030.png" /></p>
<p><img alt="image-20200522003012593" src="../openEuler%E7%A4%BE%E5%8C%BA%E5%8F%82%E4%B8%8E%E4%B9%8B%E6%97%85.assets/image-20200522003012593.png" />    </p>
<ul>
<li>
<p>代码reviewers可以针对提交给出自己意见，当他认可你的提交时，会<code>/lgtm</code>来给出ok的意见。</p>
</li>
<li>
<p>仓库的maintainers有合入的权限，<code>/approve</code>的评论会触发robot自动合入，如果存在冲突，你需要提前解决冲突。</p>
</li>
<li>
<p>针对别人给出的检视意见。如果涉及修改代码，可以使用<code>git commit --amend； git push -f</code>来在同一个PR更新代码。</p>
</li>
</ul>
<p><strong>检视代码</strong>:</p>
<p>openEuler是一个开放的社区，我们希望所有参与社区的人都能成为活跃的检视者。可以参考<a href="https://gitee.com/openeuler/community/blob/master/community-membership_cn.md">社区成员</a>，该文档描述了不同贡献者的角色职责。</p>
<p><strong>对于贡献者</strong>，为了使您的提交更容易被接受，您需要：</p>
<ul>
<li>遵循SIG组的编码约定，如果有的话</li>
<li>准备完善的提交信息</li>
<li>如果一次提交的代码量较大，建议将大型的内容分解成一系列逻辑上较小的内容，分别进行提交会更便于检视者理解您的想法</li>
<li>使用适当的SIG组和监视者标签去标记PR：社区机器人会发送给您消息，以方便您更好的完成整个PR的过程</li>
</ul>
<p><strong>对于检视者</strong>，强烈建议本着<a href="https://gitee.com/openeuler/community/blob/master/code-of-conduct.md">行为准则</a>，超越自我，相互尊重和促进协作。<a href="https://sage.thesharps.us/2014/09/01/the-gentle-art-of-patch-review/">《补丁审核的柔和艺术》</a>一文中提出了一系列检视的重点，说明代码检视的活动也希望能够促进新的贡献者积极参与，而不会使贡献者一开始就被细微的错误淹没，所以检视的时候，可以重点关注包括：</p>
<ul>
<li>贡献背后的想法是否合理</li>
<li>贡献的架构是否正确</li>
<li>贡献是否完善</li>
</ul>
<p>注意：如果您的PR请求没有引起足够的关注，可以在SIG的邮件列表或<a href="mailto:dev@openeuler.org">dev@openeuler.org</a>求助。</p>
<p>这里是一个<a href="https://gitee.com/open_euler/dashboard/projects/src-openeuler/ct-ng/pulls/2?tab=comments">可供参考的事</a>。</p>
<h3 id="3">3、创建兴趣小组<a class="headerlink" href="#3" title="Permanent link">#</a></h3>
<p><strong>找到您感兴趣的SIG或项目</strong></p>
<p>找到您感兴趣的SIG组，可以帮助您在正确的地方提出问题，并得到更快的社区响应。</p>
<ul>
<li>方式一：如果您不了解有哪些SIG或项目，您可以查看<a href="https://gitee.com/openeuler/community/tree/master/sig">SIG列表</a>，它包含当前openEuler社区成立的所有SIG团队的清单。您可以通过该列表快速的定位到您感兴趣的领域所对应SIG团队。同时还会向您提供该SIG团队的如下信息：</li>
<li>SIG下的项目，以及项目的Repository地址</li>
<li>SIG内的交流方式，包括邮件列表、IRC或视频会议等</li>
<li>Maintainer的联系方式</li>
<li><strong>方式二</strong>：如果您知道感兴趣的项目名称，可以在openEuler的Repository列表下进行模糊搜索，从而快速定位到对应项目的首页地址。通常情况下，在该项目首页地址的<code>README.md</code>文件中，可以找到该项目所属的SIG信息、交流方式、成员和联系方式等。</li>
</ul>
<p>如果上述两种方式都定位不到您感兴趣的SIG，您可以向<a href="mailto:community@openeuler.org">community@openeuler.org</a>发求助邮件。建议您在邮件列表内用“【开发过程疑问】”作为标题，在内容中写出你寻找的SIG或项目的特征，我们会为您提供帮助。</p>
<p>确定好你要创建小组后，可以提交 PR 到 <a href="https://gitee.com/openeuler/community/tree/master/sig">community仓库</a>，并在TC例会上申请议题（订阅<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#116;&#99;&#64;&#111;&#112;&#101;&#110;&#101;&#117;&#108;&#101;&#114;&#46;&#111;&#114;&#103;">&#116;&#99;&#64;&#111;&#112;&#101;&#110;&#101;&#117;&#108;&#101;&#114;&#46;&#111;&#114;&#103;</a>，并关注议题收集的邮件），经过大家一致同意后，合入PR，就代表sig创立成功。 </p>
<p>这里是一个PR提交创立sig-golang的<a href="https://gitee.com/openeuler/community/commit/27b68ca952fffe175ff86b5debe286ea356347db">具体例子</a>，包括sig的raodmap、职责、管理的仓库（也许是从别的sig中移交过来）、联系方式和maintainer等信息。</p>
<h3 id="4">4、贡献软件包<a class="headerlink" href="#4" title="Permanent link">#</a></h3>
<p>当前发现openEuler社区缺少你需要的软件时，你可以尝试动手为社区贡献软件包。这里不再赘述OS是如何由linux软件包组成的，以及如何制作一个rpm包。这里着重讲解贡献软件包的流程。</p>
<ul>
<li>
<p>首先，要明确贡献的软件包的功能，遵循<a href="https://gitee.com/openeuler/community/blob/master/zh/technical-committee/governance/software-management.md">openEuler软件包引入和退出原则</a>。</p>
</li>
<li>
<p>再者，由于软件唯一的归属于一个sig，你需要查看当前是否有合适的sig承载，如果没有，需要你按照步骤3申请成立一个新的sig。</p>
</li>
<li>
<p>然后，你可以通过提交PR的方式，在对应的sig下添加软件仓库。可参考<a href="https://gitee.com/openeuler/community/pulls/438">这个提交</a>，一旦审核通过，后台会自动为你在对应的src-openeuler group下创建同名仓库，并在<a href="https://build.openeuler.org/project/show/openEuler:Factory">Factory</a>工程中去创建同名package开始构建，由于默认仓库里只有readme，并不会进行真正的构建，而是exclude状态。</p>
</li>
</ul>
<p><img alt="image-20200522001706202" src="../openEuler%E7%A4%BE%E5%8C%BA%E5%8F%82%E4%B8%8E%E4%B9%8B%E6%97%85.assets/image-20200522001706202.png" /></p>
<ul>
<li>接着你可以按照2的操作提交一个PR，来上传可以构建的代码。一旦合入，Factory工程便会触发构建。</li>
</ul>
<p><img alt="image-20200522001826061" src="../openEuler%E7%A4%BE%E5%8C%BA%E5%8F%82%E4%B8%8E%E4%B9%8B%E6%97%85.assets/image-20200522001826061.png" /></p>
<ul>
<li>
<p>软件打包符合打包规范，请参考<a href="https://gitee.com/openeuler/community/blob/master/zh/contributors/packaging.md">如何打包</a>。</p>
</li>
<li>
<p>该工程下所有软件包成功的构建结果，归档在：</p>
</li>
</ul>
<p><img alt="image-20200522002217686" src="../openEuler%E7%A4%BE%E5%8C%BA%E5%8F%82%E4%B8%8E%E4%B9%8B%E6%97%85.assets/image-20200522002217686.png" /></p>
<p><strong>它是以repo源的方式归档，可以直接使用yum安装。</strong></p>
<p><img alt="image-20200522002316316" src="../openEuler%E7%A4%BE%E5%8C%BA%E5%8F%82%E4%B8%8E%E4%B9%8B%E6%97%85.assets/image-20200522002316316.png" /></p>
<h2 id="openeuler-obs">openEuler OBS使用<a class="headerlink" href="#openeuler-obs" title="Permanent link">#</a></h2>
<p>这两片文章帮助你了解obs的基本使用。<a href="https://openeuler.org/zh/blog/2020/03/26/2020-03-26-how-to-OBS.html">如何使用 openEuler OBS - （一）介绍</a>  和<a href="https://openeuler.org/zh/blog/2020/03/26/2020-03-26-OBS-with-Git.html">如何使用 openEuler OBS - （二）与gitee的联动</a></p>
<h3 id="obs">什么是obs？<a class="headerlink" href="#obs" title="Permanent link">#</a></h3>
<p>OBS是Open Build Service 的简写（官方网址：<a href="https://openbuildservice.org/">https://openbuildservice.org/</a>），</p>
<p>原本是作为发行版openSUSE专用的rpm打包的平台，后续扩展为面向多发行版、多架构、多格式的打包发布平台。</p>
<p><img alt="img" src="https://openeuler.org/zh/blog/fuchangjie/2020-03-26-how-to-OBS-%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84.png" /></p>
<p><strong>与koji的不同</strong></p>
<ul>
<li>管理范围</li>
</ul>
<p>与koji只管理包（包括源码包与二进制包）仓库不同，OBS同时管理着源码与包两个仓库。koji是从一个包编译完成后开始接手，根据包的NVR（Name-Version-Release）确定包的位置，在编译验证后入库保存。而OBS是从源码阶段开始管理，它拥有自己的包版本标记与changelog日志。<strong>OBS可以像git一样保存源码的历史版本，对源码进行分支管理</strong>。并生成各版本的二进制包与源码包。</p>
<p>换句话说，OBS可以同时实现koji和git的功能。 &gt; OBS接受源码的格式与git普遍的保存格式并不相同，所以OBS无法完全取代git。</p>
<ul>
<li>适用格式</li>
</ul>
<p>OBS可以生成rpm、deb等格式的包，而koji只适用于rpm格式。</p>
<ul>
<li>支持Rest API</li>
</ul>
<p>方便测试框架、构建工程调用。</p>
<h3 id="obs_1">如何配置obs<a class="headerlink" href="#obs_1" title="Permanent link">#</a></h3>
<p><strong>安装osc</strong></p>
<p>osc是OBS的命令行程序，您可以在<a href="https://download.opensuse.org/repositories/openSUSE:/Tools/">这里</a> ，选择自己的系统版本，添加软件源到自身包管理器中。</p>
<p>这里以Fedora30为例：</p>
<ol>
<li>添加软件源</li>
</ol>
<p>将文件<code>http://download.opensuse.org/repositories/openSUSE:/Tools/Fedora_30/openSUSE:Tools.repo</code>另存到/etc/yum.repo.d/中。 &gt; 需要root权限。</p>
<ol>
<li>安装osc</li>
</ol>
<p>执行 <code>dnf install osc</code> 命令安装osc。</p>
<p><strong>配置openEuler的OBS</strong></p>
<p>有很多方法可以将osc链接至openEuler外网的OBS：</p>
<ol>
<li>
<p>最基础的方法为在每次执行 <code>osc</code> 命令时添加参数： <code>-A http://openeuler-build.huawei.com/</code></p>
</li>
<li>
<p>使用alias：<code>alias iosc="osc -A http://openeuler-build.huawei.com/"</code></p>
</li>
<li>
<p>修改位于<code>home</code>目录下的osc配置文件：<code>vi ~/.oscrc</code>，并写入以下内容：</p>
</li>
</ol>
<div class="highlight"><pre><span></span><code>[general]
apiurl = http://openeuler-build.huawei.com/

[http://openeuler-build.huawei.com/]
</code></pre></div>
<p><strong>注册OBS账号</strong></p>
<p>打开 <a href="http://openeuler-build.huawei.com/">http://openeuler-build.huawei.com/</a>，点击右上角“Sign Up”，注册自己喜欢的帐号。</p>
<p>注册完成后，重新回到上面网址。点击右上角的“Login”，用新账户登录。系统会在注册时自动创建一个以“home:用户名”为格式命名的Home Project。</p>
<p>后续需要邮箱向infra@openEuler.org申请。</p>
<h3 id="osc">OSC 命令<a class="headerlink" href="#osc" title="Permanent link">#</a></h3>
<p>osc help 是帮助指南。类似git命令。</p>
<p>List Existing Content on the Server</p>
<div class="highlight"><pre><span></span><code>osc ls                    #list projects
osc ls Apache             #list packages in a project
osc ls Apache flood       #list files of package of a project
</code></pre></div>
<p>Checkout Content</p>
<div class="highlight"><pre><span></span><code>osc co Apache                   # entire project
osc co Apache flood             # a package
osc co Apache flood flood.spec  # single file
</code></pre></div>
<p>Update a Working Ddirectory</p>
<div class="highlight"><pre><span></span><code>osc up
osc up [directory]
osc up *            # from within a project dir, update all packages
osc up              # from within a project dir, update all packages AND check out all newly added packages
</code></pre></div>
<p>Upload Changed Content</p>
<div class="highlight"><pre><span></span><code>osc ci                          # current dir
osc ci [file1] [file2]          # only specific files
osc ci [dir1] [dir2] ...        # multiple packages
osc ci -m &quot;updated foobar&quot;      # specify a commit message
</code></pre></div>
<p>Check the Commit Log</p>
<div class="highlight"><pre><span></span><code>osc log
</code></pre></div>
<p>Show the status (which files have been changed locally)</p>
<div class="highlight"><pre><span></span><code>osc st
osc st [directory]
</code></pre></div>
<p>If an update cannot be merged automatically, a file is in 'C' (conflict) state, and conflicts are marked with special lines. After manually resolving the problem, use <code>osc resolved *FILE*</code>.</p>
<p>Mark files to be Added or Removed on the Next Checkin</p>
<div class="highlight"><pre><span></span><code>osc add foo
osc rm foo
</code></pre></div>
<p>Add all New Files in Local Copy and Removes all Disappeared files</p>
<div class="highlight"><pre><span></span><code>osc addremove
</code></pre></div>
<p>Generate a diff to view the changes</p>
<div class="highlight"><pre><span></span><code>osc diff [file]
</code></pre></div>
<p>Show the Build Results of the Package</p>
<div class="highlight"><pre><span></span><code>osc results
osc results [platform]
</code></pre></div>
<p>Show the Log File of a Package</p>
<p>(you need to be inside a package directory)</p>
<div class="highlight"><pre><span></span><code>osc buildlog [platform] [arch]
</code></pre></div>
<p>在本地机器上构建</p>
<div class="highlight"><pre><span></span><code>osc build [platform] [arch] [specfile] [--clean|--noinit|...]
</code></pre></div>
<p>以abuild用户进入chroot环境，方便调试</p>
<div class="highlight"><pre><span></span><code>osc chroot [platform] [arch]
</code></pre></div>
<h3 id="package">如何创建自己的工程，package<a class="headerlink" href="#package" title="Permanent link">#</a></h3>
<p><strong>配置Project</strong></p>
<p>两种方法：网页操作、命令行操作</p>
<ul>
<li>网页操作：</li>
</ul>
<p>在obs主页点击右上角</p>
<p><img alt="img" src="https://openeuler.org/zh/blog/fuchangjie/2020-03-26-how-to-OBS-%E4%B8%BB%E9%A1%B5%E5%8F%B3%E4%B8%8A%E8%A7%92.png" /></p>
<p>依次进入 Home Project -&gt; Repositories -&gt; Add from a Distribution 。</p>
<p><img alt="img" src="https://openeuler.org/zh/blog/fuchangjie/2020-03-26-how-to-OBS-AFD%E9%A1%B5.png" /></p>
<p>按上图所示填写基础配置，并在Name栏填写喜欢的名字。</p>
<p>在选择后后退至Repositories界面，可以看到如下图所示的环境：</p>
<p><img alt="img" src="https://openeuler.org/zh/blog/fuchangjie/2020-03-26-how-to-OBS-%E7%8E%AF%E5%A2%83%E6%A0%87%E7%AD%BE.png" /></p>
<ol>
<li>第一个为编辑按钮，可以选择当前发行版编译架构</li>
<li>第二个为添加按钮，可在发行版标准环境上额外添加单独的包（例如其他私人编译的依赖包）</li>
<li>第三个为下载，点击后转到当前环境的仓库</li>
<li>
<p>第四个为删除</p>
</li>
<li>
<p>命令行操作：</p>
</li>
</ol>
<p>执行命令： <code>osc meta prj -e [project名]</code> ，会看到类似如下文本：</p>
<p><img alt="img" src="https://openeuler.org/zh/blog/fuchangjie/2020-03-26-how-to-OBS-meta%E9%85%8D%E7%BD%AE.png" /></p>
<p>其中， 1. repository标签为仓库标签， 可添加此项添加编译时的基础环境 2. Path标签为可用包路径标签， 需手动添加发行版包路径。如需要额外依赖， 也可以单独添加。 3. Arch标签为编译架构， 可同时添加多个。</p>
<p>例如：</p>
<div class="highlight"><pre><span></span><code>​```xml
  &lt;repository name=&quot;openEuler_selfbuild_BaseOS_beiyong_aarch64&quot;&gt;
    &lt;path project=&quot;openEuler:selfbuild:BaseOS&quot; repository=&quot;mainline_standard_aarch64&quot;/&gt;
    &lt;path project=&quot;openEuler:selfbuild:BaseOS&quot; repository=&quot;standard_aarch64&quot;/&gt;      //此为额外添加依赖
    &lt;arch&gt;aarch64&lt;/arch&gt;
    &lt;arch&gt;armv7l&lt;/arch&gt; //此为多架构选项
  &lt;/repository&gt;
​```
</code></pre></div>
<p><strong>新建包</strong></p>
<p>进入Project目录： <code>cd [project名]</code></p>
<p>新建Package： <code>osc mkpac [package名]</code></p>
<p>进入Package目录并将下载源码以【tar包、所有patch、spec文件、其他source文件】格式放置：</p>
<p>! <img alt="img" src="https://openeuler.org/zh/blog/fuchangjie/2020-03-26-how-to-OBS-%E7%9B%AE%E5%BD%95%E6%A0%BC%E5%BC%8F.png" /></p>
<p>向新创建的package中添加以上文件： <code>osc add *</code></p>
<p><img alt="img" src="https://openeuler.org/zh/blog/fuchangjie/2020-03-26-how-to-OBS-%E5%9B%BE%E7%89%871.png" /></p>
<p>将更改上传至服务器： <code>osc commit</code></p>
<p><img alt="img" src="https://openeuler.org/zh/blog/fuchangjie/2020-03-26-how-to-OBS-commit%E4%BB%8B%E7%BB%8D.png" /></p>
<p>在这里可以注明本次上传的简短介绍，用<code>:wq</code>保存并退出</p>
<p>之后就可以在网页上等待编译并查看结果了。</p>
<p><strong>查看包状态与下载包</strong></p>
<p>您可以在Project与Package主页右侧看到当前编译状态</p>
<p><img alt="img" src="https://openeuler.org/zh/blog/fuchangjie/2020-03-26-how-to-OBS-%E7%BC%96%E8%AF%91%E7%8A%B6%E6%80%81.png" /></p>
<ul>
<li><code>finished</code> 表示在某个系统平台执行编译链接、安装检查的过程结束</li>
<li><code>succeeded</code> 状态为编译成功</li>
<li><code>failed</code> 为编译失败，您可以点击查看日志</li>
</ul>
<p>您可以点击*编译平台 -&gt; Go to download repository* 到达编译仓库，获得此Project的repo源与所有编译成功的package。</p>
<p><strong>更新包</strong></p>
<p>进入project文件夹： <code>cd [project名]</code></p>
<p>更新本地代码为最新代码： <code>osc up</code></p>
<p>进入package目录，使用 <code>osc add</code> 命令将新文件添加到package，修改spec文件后使用<code>osc commit</code>命令上传新版本。</p>
<h3 id="_service">_service 的使用，与码云的联动<a class="headerlink" href="#_service" title="Permanent link">#</a></h3>
<p>分为两部分：</p>
<ul>
<li>利用Source Services（下称源服务）直接获取git源码并编译成包</li>
<li>利用webhook 使源服务在git仓库push时触发，从而实现OBS始终跟进git仓库最新版本源码的效果</li>
</ul>
<h4 id="git">利用源服务直接获取git源码并编译成包<a class="headerlink" href="#git" title="Permanent link">#</a></h4>
<p><strong>Source Services 相关</strong></p>
<blockquote>
<p>Source Services 是用于以可靠方式验证，生成或修改源的工具。它们被设计为最小的工具，并且可以按照经典UNIX设计的强大思想进行组合。</p>
</blockquote>
<p>源服务就像是系统中的函数，我们可以通过运行脚本调用它；而脚本就是Package中的_service文件。</p>
<p><strong>创建使用源服务的Package</strong></p>
<ol>
<li>通过命令行工具或者网页新建一个空的Package</li>
</ol>
<p><img alt="img" src="https://openeuler.org/zh/blog/fuchangjie/2020-03-26-OBS-with-Git-%E7%A9%BAPackage.png" /></p>
<ol>
<li>进入Package目录并创建_service:</li>
<li>网页端点击*Add file* ，点击*Choose a file*，并选择本地建好的_service文件。</li>
<li>命令行则在Package目录中新建_service文件并上传之服务器。</li>
<li>准备编辑_service文件</li>
</ol>
<p><strong>编辑_service文件</strong></p>
<p>最基础的_service文件将会如下所示：</p>
<div class="highlight"><pre><span></span><code>    <span class="p">&lt;</span><span class="n">services</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="n">service</span> <span class="n">name</span><span class="p">=</span><span class="s2">&quot;tar_scm&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="k">param</span> <span class="n">name</span><span class="p">=</span><span class="s2">&quot;scm&quot;</span><span class="p">&gt;</span><span class="n">git</span><span class="p">&lt;/</span><span class="k">param</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="k">param</span> <span class="n">name</span><span class="p">=</span><span class="s2">&quot;url&quot;</span><span class="p">&gt;</span><span class="n">git</span><span class="p">://</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="p">/</span><span class="n">cs2c-fu</span><span class="p">/</span><span class="n">hi</span><span class="p">.</span><span class="n">git</span><span class="p">&lt;/</span><span class="k">param</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="n">service</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="n">service</span> <span class="n">name</span><span class="p">=</span><span class="s2">&quot;recompress&quot;</span> <span class="n">mode</span><span class="p">=</span><span class="s2">&quot;buildtime&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="k">param</span> <span class="n">name</span><span class="p">=</span><span class="s2">&quot;compression&quot;</span><span class="p">&gt;</span><span class="n">xz</span><span class="p">&lt;/</span><span class="k">param</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="k">param</span> <span class="n">name</span><span class="p">=</span><span class="s2">&quot;file&quot;</span><span class="p">&gt;*.</span><span class="n">tar</span><span class="p">&lt;/</span><span class="k">param</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="n">service</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="n">service</span> <span class="n">name</span><span class="p">=</span><span class="s2">&quot;set_version&quot;</span> <span class="n">mode</span><span class="p">=</span><span class="s2">&quot;buildtime&quot;</span><span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="n">services</span><span class="p">&gt;</span>
</code></pre></div>
<p>最外层为<code>标记，在</code>内则为一个个<code>函数，而</code>则为``函数的参数。</p>
<p>为了实现“<strong>利用源服务直接获取git源码并编译成包</strong>”这个目标，</p>
<p>我们的_service应该类似于这样（以下格式请根据具体情况选择合适的顺序）：</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;services&gt;</span>

  <span class="nt">&lt;service</span> <span class="na">name=</span><span class="s">&quot;tar_scm&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;scm&quot;</span><span class="nt">&gt;</span>git<span class="nt">&lt;/param&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;filename&quot;</span><span class="nt">&gt;</span>helloworld<span class="nt">&lt;/param&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;url&quot;</span><span class="nt">&gt;</span>git://github.com/cs2c-fu/hi.git<span class="nt">&lt;/param&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;versionprefix&quot;</span><span class="nt">&gt;</span>VERSION.git<span class="nt">&lt;/param&gt;</span>
  <span class="nt">&lt;/service&gt;</span>

  <span class="nt">&lt;service</span> <span class="na">name=</span><span class="s">&quot;extract_file&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;archive&quot;</span><span class="nt">&gt;</span>*.*<span class="nt">&lt;/param&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;files&quot;</span><span class="nt">&gt;</span>*/*.spec */*.patch<span class="nt">&lt;/param&gt;</span>
  <span class="nt">&lt;/service&gt;</span>

  <span class="nt">&lt;service</span> <span class="na">name=</span><span class="s">&quot;recompress&quot;</span> <span class="na">mode=</span><span class="s">&quot;buildtime&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;compression&quot;</span><span class="nt">&gt;</span>xz<span class="nt">&lt;/param&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;file&quot;</span><span class="nt">&gt;</span>*.tar<span class="nt">&lt;/param&gt;</span>
  <span class="nt">&lt;/service&gt;</span>

  <span class="nt">&lt;service</span> <span class="na">name=</span><span class="s">&quot;set_version&quot;</span> <span class="na">mode=</span><span class="s">&quot;buildtime&quot;</span><span class="nt">/&gt;</span>

<span class="nt">&lt;/services&gt;</span>
</code></pre></div>
<p>下面将对所需的服务逐一进行介绍：</p>
<p><strong>第一个服务：<a href="https://github.com/openSUSE/obs-service-tar_scm">tar_scm</a></strong></p>
<p><strong>tar_scm</strong> 会将链接 url 中的仓库下载下来并打包为 tar 文件，文件包命名格式为：</p>
<blockquote>
<p>[Name]-[Version].[commit_timestamp].tar</p>
</blockquote>
<p>其中，[commit_timestamp]为 commit 十六进制时间戳。</p>
<p>可选参数：</p>
<ul>
<li><strong>filename</strong> 定义打包后文件的 Name，默认为git仓库名。</li>
<li><strong>versionprefix</strong> 定以打包后文件的 Version 格式，默认为当前十进制时间戳。</li>
</ul>
<p>在OBS官方服务器中， <strong>tar_scm</strong> 服务由于在空间利用率上表现不佳， 已被 <strong>obs_scm</strong>、<strong>tar</strong> 服务取代，但openEuler的外网OBS暂时还不支持**obs_scm**，所以这里选择 <strong>tar_scm</strong> 。</p>
<blockquote>
<p>详见：<a href="https://openbuildservice.org/2016/04/08/new_git_in_27/">链接</a></p>
</blockquote>
<p><strong>第二个服务：<a href="https://github.com/openSUSE/obs-service-extract_file">extract_file</a></strong></p>
<p><strong>extract_file</strong> 可以从tar包中提取文件， 具体需要提取什么文件取决于git仓库中的文件格式。</p>
<p>一般来说我们可以将打包需要的内容分为四大类：</p>
<ul>
<li><strong>源码</strong> ： 参与编译过程的文件</li>
<li><strong>spec文件</strong> ： 指导如何打包的规范文件</li>
<li><strong>patch文件</strong> ： 修改源码的差异文件</li>
<li><strong>源文件</strong> ： 不参与编译但需要打包的文件</li>
</ul>
<p>对于**git仓库**来说，一般会将所有文件放到仓库的根目录。</p>
<p><img alt="img" src="https://openeuler.org/zh/blog/fuchangjie/2020-03-26-OBS-with-Git-git%E4%BB%93%E5%BA%93.png" /></p>
<p>此时我们需要将**spec文件、patch文件、源文件**提取出来， **源码**则留在tar包中等待之后的服务将其压缩打包。</p>
<p>对于**OBS仓库**来说，为了方便OBS系统使用，人们已经对源码进行压缩打包。</p>
<p><img alt="img" src="https://openeuler.org/zh/blog/fuchangjie/2020-03-26-OBS-with-Git-OBS%E4%BB%93%E5%BA%93.png" /></p>
<p>此时我们需要将**所有文件**提取出来并省略之后的压缩打包环节。</p>
<p>参数：</p>
<ul>
<li><strong>archive</strong> 定义提取来源文件格式</li>
<li><strong>files</strong> 定义提取文件类型 <em>注意：存在一个顶层目录，其名称未知，因此文件名应以 “*/” 开头</em></li>
</ul>
<p><strong>第三个服务：<a href="https://github.com/openSUSE/obs-service-recompress">recompress</a></strong></p>
<p><strong>recompress</strong> 会对指定文件进行压缩</p>
<p>参数：</p>
<ul>
<li><strong>compression</strong> 压缩格式，可选：none、gz、bz2、xz</li>
<li><strong>file</strong> 压缩内容</li>
</ul>
<p><strong>第四个服务：<a href="https://github.com/openSUSE/obs-service-set_version">set_version</a></strong></p>
<p>会将spec文件中的Version替换为obs_scm时的</p>
<div class="highlight"><pre><span></span><code>[Version].[commit_timestamp]
</code></pre></div>
<p>spec文件中可以以</p>
<div class="highlight"><pre><span></span><code>helloworld-%{version}.tar.xz
</code></pre></div>
<p>格式定位源码包。</p>
<p><strong>等待编译完成</strong></p>
<p>由于使用源服务获取源码，所以编译时需要额外过程与时间。</p>
<p><img alt="img" src="https://openeuler.org/zh/blog/fuchangjie/2020-03-26-OBS-with-Git-OBS%E4%BB%93%E5%BA%93.png" /></p>
<p>当状态显示为 <strong>blocked</strong> 时， 表明源服务正在运行。当源服务运行完毕时会正常开始打包过程。</p>
<p>我的参考案例：<a href="http://openeuler-build.huawei.com/package/show/home:changjie_fu/hi">链接</a></p>
<p><strong>Source Services 在实际场景中的应用</strong></p>
<p>在<a href="http://openeuler-build.huawei.com/project/show/oVirt-SIG">oVirt-SIG</a>组中，我们应用了源服务实现代码由git到OBS的同步。</p>
<p>首先，我们在git仓库中以：<strong>spec文件、patch文件、 **源码tar包</strong> 的格式上传并管理源码。</p>
<p><img alt="img" src="https://openeuler.org/zh/blog/fuchangjie/2020-03-26-OBS-with-Git-gitee%E4%BB%93%E5%BA%93.png" /></p>
<p>在OBS系统中建立对应包并以一下格式定义_service文件：</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;services&gt;</span>
  <span class="nt">&lt;service</span> <span class="na">name=</span><span class="s">&quot;tar_scm&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;scm&quot;</span><span class="nt">&gt;</span>git<span class="nt">&lt;/param&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;filename&quot;</span><span class="nt">&gt;</span>ioprocess<span class="nt">&lt;/param&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;url&quot;</span><span class="nt">&gt;</span>https://gitee.com/openkylin/ioprocess.git<span class="nt">&lt;/param&gt;</span>
  <span class="nt">&lt;/service&gt;</span>
  <span class="nt">&lt;service</span> <span class="na">name=</span><span class="s">&quot;extract_file&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;archive&quot;</span><span class="nt">&gt;</span>*.*<span class="nt">&lt;/param&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;files&quot;</span><span class="nt">&gt;</span>*/*<span class="nt">&lt;/param&gt;</span>
  <span class="nt">&lt;/service&gt;</span>
<span class="nt">&lt;/services&gt;</span>
</code></pre></div>
<p>由于我们已经很好的在git仓库中设置了存储格式， 此时我们只需将所有文件下载并提取即可。</p>
<p>在这之后，OBS系统会帮助我们完成编译与打包的环节。</p>
<h4 id="webhook-gitpush">利用 webhook 使源服务在git仓库push时触发<a class="headerlink" href="#webhook-gitpush" title="Permanent link">#</a></h4>
<p>在写此文时，OBS系统还不支持gitee格式的webhook，所以以下内容为使用github仓库实现。</p>
<p>obs可以创建令牌（token），当令牌被触发时，OBS会运行源服务。</p>
<p>将网址与令牌添加到git仓库的webhook列表中，就可以在git仓库中实现触发源服务，进而更新OBS中的包版本。</p>
<p><strong>具体步骤：</strong></p>
<p>创建专属包的OBS Token（OBS令牌）：</p>
<div class="highlight"><pre><span></span><code>osc token --create &lt;PROJECT&gt; &lt;PACKAGE&gt;
</code></pre></div>
<p>命令将生成仅对Project/Package生效的token。</p>
<ul>
<li>使用命令 <code>osc token</code> 可以查看当前生效的令牌列表。</li>
<li>使用命令<code>osc token --delete</code> 可以删除令牌</li>
</ul>
<p>打开git仓库网址（以github为例）：</p>
<p><img alt="img" src="https://openeuler.org/zh/blog/fuchangjie/2020-03-26-OBS-with-Git-git%E4%BB%93%E5%BA%93%E9%A1%B5.png" /></p>
<p>打开仓库 -&gt; Setting -&gt; Webhooks</p>
<p><img alt="img" src="https://openeuler.org/zh/blog/fuchangjie/2020-03-26-OBS-with-Git-Webhook%E9%A1%B5.png" />
点击左上方的 Add webhook 。
<img alt="img" src="https://openeuler.org/zh/blog/fuchangjie/2020-03-26-OBS-with-Git-%E6%96%B0%E5%BB%BAWebhook.png" /></p>
<p>在 Payload URL中以：</p>
<div class="highlight"><pre><span></span><code>http://openeuler-build.huawei.com/trigger/webhook?id=&lt;令牌ID&gt;
</code></pre></div>
<p>为格式填入。</p>
<p>在 Secret 中填入令牌秘匙，按需求选择trigger类型， 保证Webhook为Active状态。</p>
<p>之后点击 Add webhook 即成功实现。</p>
<p>可尝试触发trigger以验证成果。</p>
                
              
              
                


  <h2 id="__comments">评论</h2>
  <div id="disqus_thread"></div>
<script src="https://utteranc.es/client.js"
        repo="hexiaowen/hexiaowen.github.io"
        issue-term="title"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>

              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../../awsomelist/" class="md-footer__link md-footer__link--prev" aria-label="上一页: Awesome List" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                上一页
              </span>
              Awesome List
            </div>
          </div>
        </a>
      
      
        
        <a href="../../../software/systemd/" class="md-footer__link md-footer__link--next" aria-label="下一页: systemd" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                下一页
              </span>
              systemd
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2016 - 2021 overweight
          </div>
        
        
          Made with
          <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
            Material for MkDocs
          </a>
        
        
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://github.com/hexiaowen" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.annotate", "navigation.indexes", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest"], "search": "../../../assets/javascripts/workers/search.fcfe8b6d.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\uff0c\\u3002]+", "search.placeholder": "\u641c\u7d22", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.b1047164.min.js"></script>
      
    
  </body>
</html>